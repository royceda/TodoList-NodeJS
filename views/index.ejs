<% include header %>


<body>
  <div>
    <div>
      <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" style="padding-left:130px;">
        <ul class="nav navbar-nav">
          <li class="active"><a href="/">Home<span class="sr-only">(current)</span></a></li>
          <li><a href="/chat">Chat</a></li>
          <li><a href="/contact">Session : <%= data %></a></li>
          <li><a href="/contact">Adress : <%= address  %></a></li>

          <form action="/todo/add" method="post" class="navbar-form navbar-left" role="search">
            <div class="form-group">
              <input type="text" name="task" class="form-control"  placeholder="Task">
            </div>
            <button type="submit"  class="btn btn-default">Add it !</button>
          </form>
        </ul>
      </nav>
    </div>
    <br/>
    <hr/>
    <div class="jumbotron"> <p>
      This a simple todoList made with NodeJs.
    </p>
    <p>All task were save in session variable.</p>
    <p>lon : <%= lon %>; lat : <%= lat %>; url : <%= ip %> : <%= port %> </p>
  </div>
  <br/>


<!--
  <div class="row">
    <% if(locals.flash && locals.flash.error) { %>
      <div class="alert alert-success alert-dismissible" role="alert">
      <%= flash.success %>
      </div>

      <%}%>
  </div> -->


  <div class="row">
    <div class=" col-sm-offset-3 col-sm-6 ">
      <ul class="list-group">
        <li class="list-group-item list-group-item-info">
          <span class="badge"></span>
          My todo List
        </li>
        <% list.forEach(function(task){ %>
          <li class="list-group-item">
          <span class="badge"><a  href="/todo/delete/<%= task.ID %>">X</a></span>
          <%= task.content %>
          </li>
          <% });%>
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-offset-1 col-sm-10"
      <h3>My Google Maps Demo</h3>
      <div id="map"></div>
    </div>
  </div>

</div>
</div>


<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>

    // Connexion Ã  socket.io
    var socket = io.connect('http://localhost:8888');

</script>



<!-- Google map -->
<script>
function initMap() {
  var uluru = {lat: <%= lat %>, lng: <%= lon %>};
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 4,
    center: uluru
  });
  var marker = new google.maps.Marker({
    position: uluru,
    map: map
  });
}
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCqR62vWma24LGQ1REE6NQ2-kahuD-Xg6g&callback=initMap">
</script>

</body>
</html>
